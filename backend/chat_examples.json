{
  "messaging_structure": {
    "description": "Chat system supporting Searcher-Landlord inquiries and Searcher-Dweller community chats",
    "scenarios": [
      {
        "scenario": "Searcher Inquiring Landlord",
        "conversation": {
          "id": "conv-uuid-1",
          "property_id": "prop-uuid-123",
          "type": "inquiry",
          "title": null,
          "participants": [
            { "user_id": "searcher-uuid-1", "role": "guest" },
            { "user_id": "landlord-uuid-1", "role": "owner" }
          ]
        },
        "message_example": {
          "sender_id": "searcher-uuid-1",
          "content": "Is the unit still available?",
          "type": "text"
        }
      },
      {
        "scenario": "Searcher Chatting with Dwellers (Community)",
        "conversation": {
          "id": "conv-uuid-2",
          "property_id": "prop-uuid-123",
          "type": "community",
          "title": "Avida Tower 1 Community",
          "participants": [
            { "user_id": "searcher-uuid-1", "role": "guest" },
            { "user_id": "dweller-uuid-A", "role": "resident" },
            { "user_id": "dweller-uuid-B", "role": "resident" }
          ]
        },
        "message_example": {
          "sender_id": "searcher-uuid-1",
          "content": "Hi! How is the internet signal on the 5th floor?",
          "type": "text"
        }
      }
    ],
    "table_examples": {
      "conversations": {
        "id": "conv-uuid-123",
        "property_id": "prop-uuid-567",
        "type": "community",
        "title": "Sunset Condo Dwellers",
        "last_message": "Yes, the gym is open 24/7!",
        "last_message_at": "2024-01-25T10:30:00Z"
      },
      "messages": {
        "id": "msg-uuid-999",
        "conversation_id": "conv-uuid-123",
        "sender_id": "user-dweller-1",
        "content": "Here is a photo of the view.",
        "type": "image",
        "attachments": ["https://supa.../view.jpg"],
        "created_at": "2024-01-25T10:30:00Z"
      }
    }
  }
}
